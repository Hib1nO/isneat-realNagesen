doctype html
html(lang="ja")
  head
    meta(charset="utf-8")
    meta(name="viewport" content="width=device-width, initial-scale=1")
    title Battle Bar
    link(rel="stylesheet" href="/assets/css/battle-bar.css")
    script(src="/socket.io/socket.io.js")
    script(src="/assets/js/jquery-4.0.0.min.js")
    script(src="/assets/js/game-state.js")
    script(src="/assets/js/battle-bar.js")

  body
    .battle(data-left="62" data-right="38")
      .battle__meta
        .side
          .avatar#leftAvatar01(aria-hidden="true")
          .avatar#leftAvatar02(aria-hidden="true")
          div(style="min-width:0")
            .name#leftName LEFT TEAM
            //- span.sub
            //-   | Score 
            //-   span.score#leftScore 12,345
        .side(style="justify-content:flex-end")
          div(style="min-width:0; text-align:right")
            .name#rightName RIGHT TEAM
            //- span.sub
            //-   | Score 
            //-   span.score#rightScore 7,890
          .avatar#rightAvatar01(aria-hidden="true")
          .avatar#rightAvatar02(aria-hidden="true")

      .battle__bar(role="img" aria-label="Battle progress bar")
        //- fill（割合は style で指定）
        .fill.fill--left#leftFill(style="width:62%")
          .bar-seq#barSeqLeft(aria-hidden="true")
            canvas.bar-seq__canvas#barSeqCanvasLeft
        .fill.fill--right#rightFill(style="width:38%")
          .bar-seq#barSeqRight(aria-hidden="true")
            canvas.bar-seq__canvas#barSeqCanvasRight

        .sparkle

        .battle__labels(aria-hidden="true")
          div#leftPct 62%
          div#rightPct 38%

        //- .vs
        //-   span.vs__dot
        //-   | VS
        //-   span.vs__dot

      //- ====== Sequence Image Players ======
      .sequence-players
        .sequence-player.sequence-player--left#sequencePlayerLeft
          canvas.sequence-player__canvas#canvasLeft
          audio.sequence-player__audio#audioLeft
        .sequence-player.sequence-player--right#sequencePlayerRight
          canvas.sequence-player__canvas#canvasRight
          audio.sequence-player__audio#audioRight

      //- ====== Video Players ======
      .video-players
        video.video-player__element#videoLeft
        video.video-player__element#videoRight

      //- ====== Under Bar UI (Timer  Notice) ======
      .battle__under
        //- Timer (later replaced by server data)
        .battle__timer#battleTimer 88:88

        //- Notice (two patterns, same position)
        //- data-theme: dark | mid | bright
        .noticeWrap#battleNoticeWrap(data-theme="mid" aria-live="polite")
          .noticeCard#battleNoticeCard
            .noticeCard__faces
              //- Pattern: target gifters
              .noticeFace.noticeFace--target(data-pattern="target")
                .noticeFace__content
                  .marquee
                    .marquee__track
                      .marquee__item#noticeTargetItem
                        span.notice__label#noticeTargetItemText ギフターの目標人数：2初めてのギフトでギフトポイント2倍｜10秒
                      .marquee__item(aria-hidden="true")

              //- Pattern: first gift bonus
              .noticeFace.noticeFace--bonus(data-pattern="bonus")
                .noticeFace__content
                  .notice__icon.notice__icon--spacer(aria-hidden="true")
                    span.notice__spacer
                  .marquee
                    .marquee__track
                      .marquee__item#noticeBonusItem
                        span.notice__label#noticeBonusItemText 2倍｜10秒
                      .marquee__item(aria-hidden="true")

        //- Left and Right notices container
        .battle__under-notices
          .battle__under-notice-left
            //- Left notice (left-aligned)
            .noticeWrap#battleNoticeWrapLeft(data-theme="mid" aria-live="polite")
              .noticeCard#battleNoticeCardLeft
                .noticeCard__faces
                  //- Pattern: target gifters
                  .noticeFace.noticeFace--target(data-pattern="target")
                    .noticeFace__content
                      .marquee
                        .marquee__track
                          .marquee__item#noticeTargetItemLeft
                            span.notice__label#noticeTargetItemTextLeft ギフターの目標人数：2初めてのギフトでギフトポイント2倍｜10秒
                          .marquee__item(aria-hidden="true")

                  //- Pattern: first gift bonus
                  .noticeFace.noticeFace--bonus(data-pattern="bonus")
                    .noticeFace__content
                      .notice__icon.notice__icon--spacer(aria-hidden="true")
                        span.notice__spacer
                      .marquee
                        .marquee__track
                          .marquee__item#noticeBonusItemLeft
                            span.notice__label#noticeBonusItemTextLeft 2倍｜10秒
                          .marquee__item(aria-hidden="true")

          .battle__under-notice-right
            //- Right notice (right-aligned)
            .noticeWrap#battleNoticeWrapRight(data-theme="mid" aria-live="polite")
              .noticeCard#battleNoticeCardRight
                .noticeCard__faces
                  //- Pattern: target gifters
                  .noticeFace.noticeFace--target(data-pattern="target")
                    .noticeFace__content
                      .marquee
                        .marquee__track
                          .marquee__item#noticeTargetItemRight
                            span.notice__label#noticeTargetItemTextRight ギフターの目標人数：2初めてのギフトでギフトポイント2倍｜10秒
                          .marquee__item(aria-hidden="true")

                  //- Pattern: first gift bonus
                  .noticeFace.noticeFace--bonus(data-pattern="bonus")
                    .noticeFace__content
                      .notice__icon.notice__icon--spacer(aria-hidden="true")
                        span.notice__spacer
                      .marquee
                        .marquee__track
                          .marquee__item#noticeBonusItemRight
                            span.notice__label#noticeBonusItemTextRight 2倍｜10秒
                          .marquee__item(aria-hidden="true")


      //- ここから下はデモ。不要なら丸ごと削除OK
      .demo
        span Left %
        input#slider(type="range" min="0" max="100" value="62")
        span#sliderVal 62
        br
        span 連番再生：
        button#testSeqLeft30.button 左30fps再生
        button#testSeqLeft60.button 左60fps再生
        button#testSeqLeft30Loop.button 左30fpsループ
        button#testSeqLeft60Loop.button 左60fpsループ
        button#testSeqRight30.button 右30fps再生
        button#testSeqRight60.button 右60fps再生
        button#testSeqRight30Loop.button 右30fpsループ
        button#testSeqRight60Loop.button 右60fpsループ
        button#testSeqStop.button 停止
        br
        span 動画再生：
        button#testVideoLeft.button 左動画再生
        button#testVideoRight.button 右動画再生
        button#testVideoStop.button 動画停止
        br
        span 雷エフェクト：
        button#testLightningLeftOn.button 左ON
        button#testLightningLeftOff.button 左OFF
        button#testLightningRightOn.button 右ON
        button#testLightningRightOff.button 右OFF
        button#testBtn01.button 通知表示（ギフター目標）
        button#testBtn02.button 通知表示（初ギフト2倍）
        button#testBtn03.button テーマ切替dark
        button#testBtn04.button テーマ切替mid
        button#testBtn05.button テーマ切替bright
        button#testBtn06.button 非表示
        button#testBtn07.button targetテキスト変更01
        button#testBtn08.button targetテキスト変更02
        button#testBtn09.button bonusテキスト変更01
        button#testBtn10.button bonusテキスト変更02
        button#testBtn11.button 左通知表示 target
        button#testBtn19.button 左通知表示 bonus
        button#testBtn25.button 左通知表示 bonus Text02
        button#testBtn12.button 右通知表示 target
        button#testBtn20.button 右通知表示 bonus
        button#testBtn26.button 右通知表示 bonus Text02
        br
        span 左通知テーマ：
        button#testBtn13.button 左dark
        button#testBtn14.button 左mid
        button#testBtn15.button 左bright
        br
        span 右通知テーマ：
        button#testBtn16.button 右dark
        button#testBtn17.button 右mid
        button#testBtn18.button 右bright 
        br
        span 左右通知テーマ：
        button#testBtn21.button 非表示
        br
        span テキスト+テーマ同時変更：
        button#testBtn22.button 中央(text+theme dark)
        button#testBtn23.button 左(text+theme bright)
        button#testBtn24.button 右(text+theme mid)

